import{_ as D,c as i,o as l,a as d,F as g,d as h,n as E,t as S,u as V,e as F,k as I,V as P,a9 as T,aa as U,z as _,f as O}from"./index-DEg5aSmt.js";const j={__name:"MyGrid",props:["grid"],setup(f){return(k,y)=>(l(),i("table",null,[d("tbody",null,[(l(!0),i(g,null,h(f.grid,(p,m)=>(l(),i("tr",{key:m},[(l(!0),i(g,null,h(p,(n,a)=>(l(),i("td",{key:a,style:E({color:n==null?void 0:n.color})},S(V(F).getCell2(n)),5))),128))]))),128))])]))}},w=D(j,[["__scopeId","data-v-2ec97fcf"]]),B={style:{margin:"auto"}},N="https://api.binance.com",$="https://eapi.binance.com",G={__name:"HomePage",setup(f){function k(a){Object.keys(a).forEach(e=>{isNaN(parseFloat(a[e]))||(a[e]=parseFloat(a[e]))})}function y(a,e,o){const t={};return a.forEach(r=>t[r[o]]=r),e.forEach(r=>Object.assign(t[r[o]],r)),Object.values(t)}class p{async get(e){return e=`https://www.frontline-optimizer.com/api/proxy?url=${encodeURIComponent(e)}`,(await P.get(e)).data}async spotKline(e="BTCUSDT",o="5m",t=500){const r=await this.get(`${N}/api/v3/klines?symbol=${e}&interval=${o}&limit=${t}`);console.log(r)}async getOptTickers(){let e=await this.get(`${$}/eapi/v1/ticker`);const o=await this.get(`${$}/eapi/v1/mark`);e=y(e,o,"symbol");const t={};e.forEach(s=>{k(s);const[c,b,v,C]=s.symbol.split("-");t[c]||(t[c]={C:[],P:[],vol:0,volUSD:0});const u=t[c];u[C].push(s),u.vol+=s.volume,u.volUSD+=s.amount}),Object.values(t).forEach(s=>{const c=(b,v)=>v.amount-b.amount;s.C.sort(c),s.P.sort(c)});const r={};Object.keys(t).sort((s,c)=>t[c].volUSD-t[s].volUSD).forEach(s=>{r[s]=t[s]}),this.optTickers=r,console.log(r),window.location.href.includes("localhost")&&T(r,"optTickers.json")}async load(){const e=await U("/docs/optTickers.json");console.log(e),this.optTickers=e}}function m(a){let e=["symbol","volume(USD)","change","mark price","bid IV","ask IV","mark IV","delta","theta","gamma","vega","r"];e=e.map(t=>({text:t,color:"blue"}));const o=[e];return a.slice(0,10).forEach(t=>{o.push([t.symbol,t.amount.toFixed(0),O(t.priceChangePercent,2),t.markPrice,t.bidIV,t.askIV,t.markIV,t.delta,t.theta,t.gamma,t.vega,t.riskFreeInterest])}),o}const n=I(new p);return n.load(),(a,e)=>(l(),i("div",B,[d("div",{class:"button m10",onClick:e[0]||(e[0]=o=>n.getOptTickers())},"fetch options ticker data"),(l(!0),i(g,null,h(n.optTickers,(o,t)=>(l(),i("div",{key:t,class:"m10"},[d("h3",null,S(`${t}. Volume(USD): ${o.volUSD.toFixed(0)}, Calls: ${o.C.length}, Puts: ${o.P.length}.`),1),_(w,{class:"m10",grid:m(o.C)},null,8,["grid"]),_(w,{class:"m10",grid:m(o.P)},null,8,["grid"])]))),128))]))}};export{G as default};
