import{ao as D,b as i,e as l,f as d,F as g,v as h,an as E,n as S,u as F,as as I,s as P,i as _,aM as T,a$ as U,b0 as V,ap as O}from"./index-BC2AeAwf.js";const j={__name:"MyGrid",props:["grid"],setup(f){return(y,b)=>(i(),l("table",null,[d("tbody",null,[(i(!0),l(g,null,h(f.grid,(p,m)=>(i(),l("tr",{key:m},[(i(!0),l(g,null,h(p,(n,a)=>(i(),l("td",{key:a,style:E({color:n==null?void 0:n.color})},S(F(I).getCell2(n)),5))),128))]))),128))])]))}},$=D(j,[["__scopeId","data-v-2ec97fcf"]]),B={style:{margin:"auto"}},N="https://api.binance.com",w="https://eapi.binance.com",M={__name:"HomePage",setup(f){function y(a){Object.keys(a).forEach(e=>{isNaN(parseFloat(a[e]))||(a[e]=parseFloat(a[e]))})}function b(a,e,o){const t={};return a.forEach(r=>t[r[o]]=r),e.forEach(r=>Object.assign(t[r[o]],r)),Object.values(t)}class p{async get(e){return e=`https://www.frontline-optimizer.com/api/proxy?url=${encodeURIComponent(e)}`,(await T.get(e)).data}async spotKline(e="BTCUSDT",o="5m",t=500){const r=await this.get(`${N}/api/v3/klines?symbol=${e}&interval=${o}&limit=${t}`);console.log(r)}async getOptTickers(){let e=await this.get(`${w}/eapi/v1/ticker`);const o=await this.get(`${w}/eapi/v1/mark`);e=b(e,o,"symbol");const t={};e.forEach(s=>{y(s);const[c,k,v,C]=s.symbol.split("-");t[c]||(t[c]={C:[],P:[],vol:0,volUSD:0});const u=t[c];u[C].push(s),u.vol+=s.volume,u.volUSD+=s.amount}),Object.values(t).forEach(s=>{const c=(k,v)=>v.amount-k.amount;s.C.sort(c),s.P.sort(c)});const r={};Object.keys(t).sort((s,c)=>t[c].volUSD-t[s].volUSD).forEach(s=>{r[s]=t[s]}),this.optTickers=r,console.log(r),window.location.href.includes("localhost")&&U(r,"optTickers.json")}async load(){const e=await V("/docs/optTickers.json");console.log(e),this.optTickers=e}}function m(a){let e=["symbol","volume(USD)","change","mark price","bid IV","ask IV","mark IV","delta","theta","gamma","vega","r"];e=e.map(t=>({text:t,color:"blue"}));const o=[e];return a.slice(0,10).forEach(t=>{o.push([t.symbol,t.amount.toFixed(0),O(t.priceChangePercent,2),t.markPrice,t.bidIV,t.askIV,t.markIV,t.delta,t.theta,t.gamma,t.vega,t.riskFreeInterest])}),o}const n=P(new p);return n.load(),(a,e)=>(i(),l("div",B,[d("div",{class:"button m10",onClick:e[0]||(e[0]=o=>n.getOptTickers())},"fetch options ticker data"),(i(!0),l(g,null,h(n.optTickers,(o,t)=>(i(),l("div",{key:t,class:"m10"},[d("h3",null,S(`${t}. Volume(USD): ${o.volUSD.toFixed(0)}, Calls: ${o.C.length}, Puts: ${o.P.length}.`),1),_($,{class:"m10",grid:m(o.C)},null,8,["grid"]),_($,{class:"m10",grid:m(o.P)},null,8,["grid"])]))),128))]))}};export{M as default};
