import{c as y,o as p,a as g,z as c,H as M,m as I,b as K,a4 as N,g as U,i,L as z,U as A,D as h,t as d,F,d as P,u as J,a5 as L,a6 as b,a7 as q,h as H}from"./index-DEg5aSmt.js";import{a as T,_ as G}from"./MyPlot-BTI5A_zQ.js";import{P as Q}from"./Plotter-DySF9XSj.js";import{_ as R}from"./MarkDown-Cl0nAmp9.js";const W={__name:"FileInput",emits:["change"],setup(r,{emit:t}){const l=t;function u(e){l("change",Array.from(e.target.files)),e.target.value=null}return(e,s)=>(p(),y("label",null,[g("input",{hidden:"",type:"file",multiple:"",onChange:u},null,32),c(M,{class:"col",i:"upload"})]))}},X=["placeholder","value"],Y={__name:"EnterInput",props:I(["ph"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const t=K(r,"modelValue");function l(e){const s=e.target.value;s||(t.value=s)}function u(e){t.value=e.target.value}return(e,s)=>(p(),y("input",{class:"input mv5",placeholder:r.ph,value:t.value,onInput:l,onKeydown:N(u,["enter"])},null,40,X))}},j={__name:"DebugData",props:["data"],setup(r){function t(l){return`
\`\`\`json
${JSON.stringify(l,null,2)}
\`\`\`
  `}return(l,u)=>(p(),U(R,{text:t(r.data)},null,8,["text"]))}},Z={class:"f1 row start m10"},ee={class:"col g5",style:{width:"300px"}},te={class:"row"},ae={class:"row wrap gh20"},oe=["onClick"],ce={__name:"OptViewer",setup(r){const t={upload:"上传优化结果文件(json):",minSim:"最小相似度:",picked:"选中结果1:",picked2:"选中结果2:",modes:["hover激活","click激活"],xAxis:"y 轴:"},l=i(),u={},e=i([{ma_period:45,offset_enter:.05,offset_exit:.007,n_slot:3,take_profit:.03,stop_loss:-.56,timeout:297,ratio_used:.82}]),s=i(),m=i(.95),k=i(1),O=Object.keys(e.value[0]),_=i();z([e,m,_],V),A(async()=>{});async function C(v){for(let o of v)u[o.name]=await L(o);V()}function V(){const v=e.value?Object.values(e.value[0]):null,o=new Q;Object.entries(u).forEach(([a,$])=>{a=a.replace(".json","").replace("recorder_","");const w="n_slot",D=b.groupBy($.xy,x=>x[0][w]);Object.entries(D).forEach(([x,E])=>{const S=E.map(n=>{let f;if(v&&m.value){const B=Object.values(n[0]);q(v,B)>m.value&&(f="red")}return b.isEqual(e.value[0],n[0])&&(f="black"),{x:n[1][0],y:_.value?n[0][_.value]:n[1][1],click:()=>{k.value==0?s.value=n:e.value=n},hover:()=>{k.value==0?e.value=n:s.value=n},color:f,opacity:f?.7:.3,size:f?12:6}});o.plot(S,".",`${a} ${w}=${x}`)})}),o.option.tooltip=!1,l.value=o.option}return(v,o)=>(p(),y("div",Z,[g("div",ee,[h(d(t.upload)+" ",1),c(W,{onChange:C}),h(" "+d(t.minSim)+" ",1),g("div",null,[c(Y,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a)},null,8,["modelValue"])]),g("div",te,[c(T,{items:t.modes,modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=a=>k.value=a)},null,8,["items","modelValue"])]),h(" "+d(t.xAxis)+" ",1),g("div",ae,[(p(!0),y(F,null,P(J(O),a=>(p(),y("div",{class:H({link:_.value==a}),key:a,onClick:$=>_.value=a},d(a),11,oe))),128))]),h(" "+d(t.picked)+" ",1),c(j,{data:e.value},null,8,["data"]),h(" "+d(t.picked2)+" ",1),c(j,{data:s.value},null,8,["data"])]),c(G,{option:l.value},null,8,["option"])]))}};export{ce as default};
